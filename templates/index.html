{% extends "base.html" %}
{% load static from staticfiles %}

{% block webhead %}
<meta charset="UTF-8">
<meta name="viewport"
    content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
{% endblock %}

{% block webbody %}

<el-row :gutter="20">
    <el-col :span="8">
        <div style="margin-bottom: 20px;">
            <el-row type="flex" justify="center">
                <!-- <div class="bg-layout"> -->
                <el-avatar shape="square" :size="150" :src="profilePic" @error="errorHandler">
                    <img src="https://cube.elemecdn.com/e/fd/0fc7d20532fdaf769a25683617711png.png" />
                </el-avatar>
                <!-- </div> -->
            </el-row>
            <el-row align="bottom" type="flex" justify="center">
                <!-- <div class="bg-layout"> -->
                <h1>{{name}}</h1>
                <!-- </div> -->
            </el-row>
        </div>
    </el-col>
    <el-col :span="16">
        <div style="margin-bottom: 20px;">
            <h2>Location: {{location}}</h2>
            <h2>Type: {{workType}}</h2>
            <h2>Position: {{position}}</h2>
            <a href="{{ linkedin }}" target="_blank"><i class="fab fa-linkedin fa-2x"
                    style="margin-right: 10px;"></i></a>
            <a href="{{ email }}" target="_blank"><i class="fas fa-envelope-square fa-2x"
                    style="margin-right: 10px;"></i></a>
            <a href="{{ stackoverflow }}" target="_blank"><i class="fab fa-stack-overflow fa-2x"
                    style="margin-right: 10px;"></i></a>
            <a href="{{ github }}" target="_blank"><i class="fab fa-github-square fa-2x"
                    style="margin-right: 10px;"></i></a>
        </div>
    </el-col>
</el-row>
<el-row :gutter="20">
    <div style="margin-bottom: 20px;">
        <el-button-group style="width: 100%;">
            <el-button plain style="width: 49%" type="text" @click="dialogTableVisible = true">My Application
            </el-button>
            <el-dialog title="My Application" :visible.sync="dialogTableVisible" :close-on-click-modal="false">
                <el-table :data="{{appli|safe}}">
                    <el-table-column property="company" label="Company" width="150"></el-table-column>
                    <el-table-column property="job" label="Job" width="200"></el-table-column>
                    <el-table-column property="time" label="Date"></el-table-column>
                    <el-table-column property="status" label="Status"></el-table-column>
                </el-table>
            </el-dialog>

            <el-button plain style="width: 49%;" type="text" @click="dialogFormVisible = true">Edit Profile</el-button>
            <el-dialog title="Edit Profile" :visible.sync="dialogFormVisible" :close-on-click-modal="false">
                <H1>Personal Info</H1>
                <el-form :model="editform" method="post" action="{% url 'editProfile' %}">
                    {% csrf_token %}
                    <el-form-item label="Name" :label-width="formLabelWidth">
                        <el-input placeholder={{name}} v-model="editform.name" name="username" autocomplete="off">
                        </el-input>
                    </el-form-item>
                    <el-form-item label="Location" :label-width="formLabelWidth">
                        <el-input placeholder={{location}} v-model="editform.location" name="location"
                            autocomplete="off"></el-input>
                    </el-form-item>
                    <el-form-item label="Position" :label-width="formLabelWidth">
                        <el-input placeholder={{position}} v-model="editform.position" name="position"
                            autocomplete="off"></el-input>
                    </el-form-item>
                    <el-form-item label="Job Type" :label-width="formLabelWidth">
                        <el-checkbox-group v-model="editform.workType" name="workType">
                            <el-checkbox label="Full time" name="workType"></el-checkbox>
                            <el-checkbox label="Part time" name="workType"></el-checkbox>
                            <el-checkbox label="Remote" name="workType"></el-checkbox>
                            <el-checkbox label="Local" name="workType"></el-checkbox>
                        </el-checkbox-group>
                    </el-form-item>
                    <h1>Contact</h1>
                    <el-form-item label="Linkedin Link" :label-width="formLabelWidth">
                        <el-input placeholder={{linkedin}} v-model="editform.linkedin" name="linkedin"
                            autocomplete="off"></el-input>
                    </el-form-item>
                    <el-form-item label="Github Link" :label-width="formLabelWidth">
                        <el-input placeholder={{github}} v-model="editform.github" name="github" autocomplete="off">
                        </el-input>
                    </el-form-item>
                    <el-form-item label="Stack Overflow" :label-width="formLabelWidth">
                        <el-input placeholder={{stackoverflow}} v-model="editform.stack" name="stack"
                            autocomplete="off"></el-input>
                    </el-form-item>
                    <el-form-item label="email" :label-width="formLabelWidth">
                        <el-input placeholder={{email}} v-model="editform.email" name="email" autocomplete="off">
                        </el-input>
                    </el-form-item>
                    <input type="hidden" name="id" value="{{ userID }}">
                    <el-button native-type="submit" style="margin-left: 88%;">save</el-button>
                </el-form>
            </el-dialog>
        </el-button-group>
    </div>
</el-row>
<el-row :gutter="20">
    <el-col>
        <div>
            <el-tabs tab-position="left">
                <el-tab-pane label="Working experience">
                    <el-row :gutter="20">
                        <el-col :span="23" :offset="1">
                            <div style="margin-top: 20px;">
                                <span style="font-weight:bold;">Industry:</span>
                                {% for i in industryType %}
                                <el-tag effect="plain" style="margin-left: 5px;">
                                    {{i|safe}}
                                </el-tag>
                                {% endfor%}
                                
                                <el-button type="text" @click="editSkillExp = true" icon="el-icon-plus"
                                    style="margin-right: 5px; font-size: 1.3rem; float: right;"></el-button>
                                <el-dialog title="Add Experience and Skill" :visible.sync="editSkillExp"
                                    :close-on-click-modal="false">
                                    <H1>name</H1>
                                    <el-form :model="addSkill" method="post" action="{% url 'editProfile' %}">
                                        {% csrf_token %}
                                        <el-form-item label="company" :label-width="formLabelWidth">
                                            <el-input v-model="addSkill.company" name="company" autocomplete="off">
                                            </el-input>
                                        </el-form-item>
                                        <el-form-item label="position" :label-width="formLabelWidth">
                                            <el-input v-model="addSkill.position" name="position" autocomplete="off">
                                            </el-input>
                                        </el-form-item>
                                        <el-form-item label="detail" :label-width="formLabelWidth">
                                            <el-input type="textarea" v-model="addSkill.detail" name="detail"
                                                autocomplete="off">
                                            </el-input>
                                        </el-form-item>
                                        <el-form-item label="industry" :label-width="formLabelWidth">
                                            {% for i in industryType %}
                                            <el-tag effect="plain" style="margin-left: 5px;" closable
                                                @close="handleClose(tag)">
                                                {{i|safe}}
                                            </el-tag>
                                            {% endfor%}

                                            <el-input class="input-new-tag" v-if="inputVisible" v-model="inputValue"
                                                ref="saveTagInput" size="small" @keyup.enter.native="handleInputConfirm"
                                                @blur="handleInputConfirm">
                                            </el-input>
                                            <el-button v-else class="button-new-tag" size="small" @click="showInput">+
                                                New Tag</el-button>
                                        </el-form-item>
                                        <input type="hidden" name="id" value="{{ userID }}">
                                        <el-button native-type="submit" style="margin-left: 88%;">save</el-button>
                                    </el-form>
                                </el-dialog>
                            </div>
                        </el-col>
                    </el-row>
                    <el-row style="margin-top: 10px">
                        <el-col span="23" :offset="1">
                            <template>
                                <el-table :data="{{experience}}" style="width: 100%">
                                    <el-table-column>
                                        <template slot-scope="scope">
                                            <el-card class="box-card">
                                                <div slot="header" class="clearfix">
                                                    <span style="font-size: 18px;">{% verbatim %}
                                                        {{ scope.row.name }}
                                                        {% endverbatim %} </span>
                                                </div>
                                                <div>{% verbatim %}
                                                    {{ scope.row.detail }}
                                                    {% endverbatim %} </div>
                                            </el-card>
                                        </template>
                                    </el-table-column>
                                    <el-table-column width="100">
                                        <template slot-scope="scope">
                                            <el-button size="mini" @click="handleEdit(scope.$index, scope.row)">编辑
                                            </el-button>
                                        </template>
                                    </el-table-column>
                                </el-table>
                            </template>
                            <el-dialog title="Edit Experience" :visible.sync="dialogUpdateVisible"
                                :close-on-click-modal="false">
                                <el-form id="#update" :model="update" ref="update" action="{% url 'editProfile' %}">
                                    {% csrf_token %}
                                    <el-form-item label="company" :label-width="formLabelWidth">
                                        <el-input v-model="update.company" name="company" autocomplete="off">
                                        </el-input>
                                    </el-form-item>
                                    <!-- <el-form-item label="position" :label-width="formLabelWidth">
                                        <el-input v-model="editExperience.position" name="position" autocomplete="off">
                                        </el-input>
                                    </el-form-item> -->
                                    <el-form-item label="detail" :label-width="formLabelWidth">
                                        <el-input type="textarea" autosize v-model="update.detail"></el-input>
                                    </el-form-item>
                                    <!-- <el-form-item label="field" :label-width="formLabelWidth">
                                        <el-input v-model="editExperience.field" name="field" autocomplete="off">
                                        </el-input>
                                    </el-form-item>
                                    <el-form-item label="time" :label-width="formLabelWidth">
                                        <el-input v-model="editExperience.time" name="time" autocomplete="off">
                                        </el-input>
                                    </el-form-item>
                                     -->
                                    <input type="hidden" name="id" v-model="update.id">
                                    <el-button native-type="submit" style="margin-left: 88%;">save
                                    </el-button>
                                </el-form>
                            </el-dialog>

                            <!-- {% for i in experience %}
                            <el-row style="margin-top: 10px">
                                
                                <el-card class="box-card">
                                    <div slot="header" class="clearfix">
                                        <span style="font-size: 18px;">{{i.name|safe}}</span>
                                        
                                    </div>
                                    <div>{{ i.detail|safe }}</div>
                                </el-card>
                            </el-row>
                            {% endfor%} -->
                        </el-col>
                    </el-row>
                </el-tab-pane>
                <el-tab-pane label="Skill / Project">
                    <el-row :gutter="20">
                        <el-col :span="23" :offset="1">
                            <div style="margin-top: 20px;">
                                <span style="font-weight:bold;">Skill:</span>
                                {% for i in skillType %}
                                <el-tag effect="plain" style="margin-left: 5px;">
                                    {{i|safe}}
                                </el-tag>
                                {% endfor%}
                            </div>
                        </el-col>
                    </el-row>
                    <el-row style="margin-top: 10px">
                        <el-col span="23" :offset="1">
                            {% for i in project %}
                            <el-row style="margin-top: 10px">
                                <el-card class="box-card">
                                    <div slot="header" class="clearfix">
                                        <span style="font-size: 18px;">{{i.name|safe}}</span>
                                    </div>
                                    <div>{{ i.detail|safe }}</div>
                                </el-card>
                            </el-row>
                            {% endfor%}
                        </el-col>
                    </el-row>
                </el-tab-pane>
            </el-tabs>
        </div>
    </el-col>
</el-row>
{% endblock %}

{% block js %}

{% endblock %}